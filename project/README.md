# Prediction Market

## üìú –û–ø–∏—Å–∞–Ω–∏–µ

**Prediction Market** ‚Äî —ç—Ç–æ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π: —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –º–∞—Ç—á–µ–π, –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–±–æ—Ä–æ–≤, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –¥—Ä.

–ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∏ –∏–º–µ–µ—Ç:
- —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–µ–¥–ª–∞–π–Ω;
- –æ—Ç 2 –¥–æ 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å—Ö–æ–¥–æ–≤;
- —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏.

–£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª–∞—é—Ç —Å—Ç–∞–≤–∫–∏ –≤ —Ç–æ–∫–µ–Ω–∞—Ö, –∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–µ–π —Å—Ç–∞–≤–∫–µ, —Å –≤—ã—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏.

---

## üë®‚Äçüéì –ê–≤—Ç–æ—Ä

- **–ò–º—è**: *–í–∞—É–ª–∏–Ω –î–∞–Ω–∏–ª*
- **–î–∞—Ç–∞**: 01.06.2025

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Solidity (0.8.20)** ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **Hardhat** ‚Äî —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Ethers v6 + TypeScript** ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- **OpenZeppelin** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (`AccessControl`, `ERC20Permit`, `ReentrancyGuard`)
- **Chai + Mocha** ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

### `createEvent(string description, string[] options, uint256 deadline)`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è:

- `description`: –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- `options`: –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å—Ö–æ–¥–æ–≤ (2‚Äì5 —Å—Ç—Ä–æ–∫)
- `deadline`: Unix-–≤—Ä–µ–º—è, –¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å

> –¢–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–∞ —Å —Ä–æ–ª—å—é `EVENT_CREATOR` –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é.

---

### `placeBet(uint256 eventId, uint256 optionIndex, uint256 amount)`
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç —Å—Ç–∞–≤–∫—É, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞–≤ `approve()`:

- `eventId`: ID —Å–æ–±—ã—Ç–∏—è
- `optionIndex`: –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (0-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)
- `amount`: —Å—Ç–∞–≤–∫–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∞–Ω–∞–ª–æ–≥ `placeBetWithPermit(...)` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è gasless-approve.

---

### `resolveEvent(uint256 eventId, uint256 winningOption)`
–†–∞–∑—Ä–µ—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ:

- –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –¥–µ–¥–ª–∞–π–Ω–∞
- `winningOption` ‚Äî –∏–Ω–¥–µ–∫—Å –≤—ã–∏–≥—Ä–∞–≤—à–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

> –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤ —Å —Ä–æ–ª—å—é `EVENT_RESOLVER`.

---

### `claimReward(uint256 eventId)`
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É, –µ—Å–ª–∏ –æ–Ω –≤—ã–±—Ä–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏ —Å–æ–±—ã—Ç–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ.

---

## üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ & –¢–æ–∫–µ–Ω–æ–º–∏–∫–∞

### üìà –†–∞—Å—á—ë—Ç –Ω–∞–≥—Ä–∞–¥:

–ü—É—Å—Ç—å:
- `T` ‚Äî –æ–±—â–∏–π –ø—É–ª —Å—Ç–∞–≤–æ–∫ (`totalBets`)
- `W` ‚Äî —Å—É–º–º–∞ —Å—Ç–∞–≤–æ–∫ –Ω–∞ –≤—ã–∏–≥—Ä–∞–≤—à–∏–π –∏—Å—Ö–æ–¥ (`winnerPool`)
- `U` ‚Äî —Å—Ç–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–¢–æ–≥–¥–∞:
- **Gross reward** = `(U * T) / W`
- **Fee** = `grossReward * feePercent / 10000`
- **Net reward** = `grossReward - fee`

### üìä –ö–æ–º–∏—Å—Å–∏—è:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0‚Äì100%) —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ —Å–æ—Ç—ã—Ö:
- `500` = 5%
- `100` = 1%
- –ö–æ–º–∏—Å—Å–∏—è –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ `claimReward`**, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è —Å—Ç–∞–≤–æ–∫.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç:
- –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (100+)
- –†–∞–∑–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –æ—Ç 20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏:
- –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥
- –£—á—ë—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏
- –ü—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (create / resolve / claim)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ `feeRecipient`

---

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### üß† –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ—Ä–∞–∫—É–ª—ã
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ **Chainlink Functions** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–±—ã—Ç–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –º–∞—Ç—á–µ–π, –≤—ã–±–æ—Ä–æ–≤).

### üìä –ì—Ä–∞—Ñ–æ–≤–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è **The Graph**
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫

### üåê –§—Ä–æ–Ω—Ç–µ–Ω–¥
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ **React + Tailwind + Wagmi + Viem**
- –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å—Ç–∞–≤–∫–∏, –Ω–∞–≥—Ä–∞–¥—ã
- Web3-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å MetaMask

### üß© –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ DAO-–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –∏—Å—Ö–æ–¥ —Å–æ–±—ã—Ç–∏—è –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ `resolve`
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ DAO-–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ PredictionMarket.sol
‚îÇ   ‚îî‚îÄ‚îÄ PredictionMarketToken.sol
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ claimReward.ts
‚îÇ   ‚îú‚îÄ‚îÄ createEvent.ts
‚îÇ   ‚îú‚îÄ‚îÄ deploy.ts
‚îÇ   ‚îú‚îÄ‚îÄ placeBet.ts
‚îÇ   ‚îî‚îÄ‚îÄ resolveEvent.ts
‚îÇ
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ PredictionMarketMassiveTest.ts
‚îÇ   ‚îî‚îÄ‚îÄ PredictionMarketTest.ts
‚îÇ
‚îú‚îÄ‚îÄ typechain-types/
‚îÇ   ‚îî‚îÄ‚îÄ (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)
‚îÇ
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ hardhat.config.ts
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json

```

## üèÅ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm install
npx hardhat compile
npx hardhat test
```
